{"version":3,"file":"index.umd.js","sources":["../src/link.js","../src/remember.js","../src/app.js"],"sourcesContent":["import { hrefToUrl, Inertia, mergeDataIntoQueryString, shouldIntercept } from '@inertiajs/inertia'\n\nexport default {\n  functional: true,\n  props: {\n    as: {\n      type: String,\n      default: 'a',\n    },\n    data: {\n      type: Object,\n      default: () => ({}),\n    },\n    href: {\n      type: String,\n      required: true,\n    },\n    method: {\n      type: String,\n      default: 'get',\n    },\n    replace: {\n      type: Boolean,\n      default: false,\n    },\n    preserveScroll: {\n      type: Boolean,\n      default: false,\n    },\n    preserveState: {\n      type: Boolean,\n      default: null,\n    },\n    only: {\n      type: Array,\n      default: () => [],\n    },\n    headers: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  render(h, { props, data, children }) {\n    data.on = {\n      click: () => ({}),\n      cancelToken: () => ({}),\n      start: () => ({}),\n      progress: () => ({}),\n      finish: () => ({}),\n      cancel: () => ({}),\n      success: () => ({}),\n      ...(data.on || {}),\n    }\n\n    const as = props.as.toLowerCase()\n    const method = props.method.toLowerCase()\n    const [url, propsData] = mergeDataIntoQueryString(method, hrefToUrl(props.href), props.data)\n\n    if (as === 'a' && method !== 'get') {\n      console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes \"Open Link in New Tab/Window\" accessibility issues.\\n\\nPlease specify a more appropriate element using the \"as\" attribute. For example:\\n\\n<inertia-link href=\"${url.href}\" method=\"${method}\" as=\"button\">...</inertia-link>`)\n    }\n\n    return h(props.as, {\n      ...data,\n      attrs: {\n        ...data.attrs,\n        ...as === 'a' ? { href: url.href } : {},\n      },\n      on: {\n        ...data.on,\n        click: event => {\n          data.on.click(event)\n\n          if (shouldIntercept(event)) {\n            event.preventDefault()\n\n            Inertia.visit(url.href, {\n              data: propsData,\n              method: method,\n              replace: props.replace,\n              preserveScroll: props.preserveScroll,\n              preserveState: props.preserveState ?? (method !== 'get'),\n              only: props.only,\n              headers: props.headers,\n              onCancelToken: data.on.cancelToken,\n              onStart: data.on.start,\n              onProgress: data.on.progress,\n              onFinish: data.on.finish,\n              onCancel: data.on.cancel,\n              onSuccess: data.on.success,\n            })\n          }\n        },\n      },\n    }, children)\n  },\n}\n","import { Inertia } from '@inertiajs/inertia'\n\nexport default {\n  created() {\n    if (!this.$options.remember) {\n      return\n    }\n\n    if (Array.isArray(this.$options.remember)) {\n      this.$options.remember = { data: this.$options.remember }\n    }\n\n    if (typeof this.$options.remember === 'string') {\n      this.$options.remember = { data: [this.$options.remember] }\n    }\n\n    if (typeof this.$options.remember.data === 'string') {\n      this.$options.remember = { data: [this.$options.remember.data] }\n    }\n\n    const stateKey = this.$options.remember.key instanceof Function\n      ? this.$options.remember.key.call(this)\n      : this.$options.remember.key\n\n    const restored = Inertia.restore(stateKey)\n\n    this.$options.remember.data.forEach(key => {\n      if (restored !== undefined && restored[key] !== undefined) {\n        this[key] = restored[key]\n      }\n\n      this.$watch(key, () => {\n        Inertia.remember(\n          this.$options.remember.data.reduce((data, key) => ({ ...data, [key]: this[key] }), {}),\n          stateKey\n        )\n      }, { immediate: true, deep: true })\n    })\n  },\n}\n","import link from './link'\nimport remember from './remember'\nimport { Inertia } from '@inertiajs/inertia'\n\nlet app = {}\n\nexport default {\n  name: 'Inertia',\n  props: {\n    initialPage: {\n      type: Object,\n      required: true,\n    },\n    resolveComponent: {\n      type: Function,\n      required: true,\n    },\n    transformProps: {\n      type: Function,\n      default: props => props,\n    },\n  },\n  data() {\n    return {\n      component: null,\n      page: {},\n      key: null,\n    }\n  },\n  created() {\n    app = this\n    Inertia.init({\n      initialPage: this.initialPage,\n      resolveComponent: this.resolveComponent,\n      transformProps: this.transformProps,\n      swapComponent: async ({ component, page, preserveState }) => {\n        this.component = component\n        this.page = page\n        this.key = preserveState ? this.key : Date.now()\n      },\n    })\n  },\n  render(h) {\n    if (this.component) {\n      const child = h(this.component, {\n        key: this.key,\n        props: this.page.props,\n        scopedSlots: this.$scopedSlots,\n      })\n\n      if (this.component.layout) {\n        if (typeof this.component.layout === 'function') {\n          return this.component.layout(h, child)\n        } else if (Array.isArray(this.component.layout)) {\n          return this.component.layout\n            .concat(child)\n            .reverse()\n            .reduce((child, layout) => h(layout, [child]))\n        }\n\n        return h(this.component.layout, [child])\n      }\n\n      return child\n    }\n  },\n  install(Vue) {\n    console.warn('Registering the Inertia Vue plugin via the \"app\" component has been deprecated. Use the new \"plugin\" named export instead.\\n\\nimport { plugin } from \\'@inertiajs/inertia-vue\\'\\n\\nVue.use(plugin)')\n    plugin.install(Vue)\n  },\n}\n\nexport const plugin = {\n  install(Vue) {\n    Object.defineProperty(Vue.prototype, '$inertia', { get: () => Inertia })\n    Object.defineProperty(Vue.prototype, '$page', { get: () => app.page })\n    Vue.mixin(remember)\n    Vue.component('InertiaLink', link)\n  },\n}\n"],"names":["functional","props","as","type","String","default","data","Object","href","required","method","replace","Boolean","preserveScroll","preserveState","only","Array","headers","render","h","children","on","click","cancelToken","start","progress","finish","cancel","success","toLowerCase","mergeDataIntoQueryString","hrefToUrl","url","propsData","console","warn","attrs","event","shouldIntercept","preventDefault","Inertia","visit","onCancelToken","onStart","onProgress","onFinish","onCancel","onSuccess","created","this","$options","remember","isArray","stateKey","key","Function","call","restored","restore","forEach","undefined","_this","$watch","reduce","immediate","deep","app","name","initialPage","resolveComponent","transformProps","component","page","init","swapComponent","Date","now","child","scopedSlots","$scopedSlots","layout","concat","reverse","install","Vue","plugin","defineProperty","prototype","get","mixin","link"],"mappings":"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"}